---
layout: default.njk
---

{% macro generateList(name, list, link) %}
  {% if list.length %}
    <ul class="list-horizontal {{ name }}">
      {% for item in list %}
        <li><a href="{{ link + '/' + item.slug | absoluteUrl }}">{{ item.name }}</a></li>
      {% endfor %}
    </ul>
  {% endif %}
{% endmacro %}

{% set categories = generateList('categories', post.categories, '/category') %}
{% set tags = generateList('tags', post.tags, '/tag') %}

<style data-helmet="post">
  {% include 'styles/post.css' %}
</style>

<aside class="meta">
  {% if post.tags.length %}
    {{ tags }}
  {% endif %}

  <span>
    <strong><time datetime="{{ post.date }}">{{ post.date | dateStringFormatted }}</time></strong>
    {% if post.modified and post.date != post.modified %}
      <small>&#x2022; zuletzt ge√§ndert am <time datetime="{{ post.modified }}">{{ post.modified | dateStringFormatted }}</time></small>
    {% endif %}
  </span>

  {% if post.categories.length %}
    {{ categories }}
  {% endif %}
</aside>

{% if post.featured_media %}
  {% set attachment = post.attachments[0] %}

  <figure class="featured-container">
    {% image 
              attachment.source, 
              attachment.alt or attachment.caption, 
              [375, 640, 960, 1280, 1600, null], 
              '(min-width: 768px) 50%, (min-width: 960px) 66%, 100%', 
              { class: 'featured', loading: 'eager', style: 'aspect-ratio: ' + attachment.width + '/' + attachment.height + ';' }
    %}
    {% if attachment.caption.length %}<figcaption class="sr-only">{{ attachment.caption }}</figcaption>{% endif %}
  </figure>
{% endif %}

<div class="post">
  <div>
    {{ content | safe }}
  </div>

  {% if post.attachments.length %}
    <section class="attachments">
      <h2>Bilder</h2>
      {% asyncEach attachment in post.attachments %}
        <figure>
          {% image attachment.source, attachment.alt or attachment.caption, [96, 192, 380, 540, null], '(min-width: 960px) 96px, (min-width: 1280px) 180px, 180px' %}
          {% if attachment.caption %}<figcaption class="sr-only">{{ attachment.caption }}</figcaption>{% endif %}
        </figure>
      {% endeach %}
    </section>
  {% endif %}
</div>